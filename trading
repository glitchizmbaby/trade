local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local player = Players.LocalPlayer
local backpack = player:WaitForChild("Backpack")

local character = player.Character or player.CharacterAdded:Wait()
player.CharacterAdded:Connect(function(char)
    character = char
end)

local function sendMultiplePetsToMultiplePlayers(petNamePatterns, targetPlayerNames)
    for _, petPattern in ipairs(petNamePatterns) do
        for _, toPlayerName in ipairs(targetPlayerNames) do
            local attempts = 0
            while attempts < 20 do  -- Sonsuz döngü olmasın diye limit koyduk
                local petTool = nil
                for _, item in ipairs(backpack:GetChildren()) do
                    if item:IsA("Tool") and string.match(item.Name, petPattern .. "$") then
                        petTool = item
                        break
                    end
                end

                if petTool and petTool.Parent == backpack then
                    for _, tool in ipairs(character:GetChildren()) do
                        if tool:IsA("Tool") and string.match(tool.Name, petPattern .. "$") then
                            tool.Parent = backpack
                        end
                    end

                    petTool.Parent = character

                    local args = {
                        {
                            {
                                Item = petTool,
                                ToGift = toPlayerName
                            },
                            "\021"
                        }
                    }

                    ReplicatedStorage:WaitForChild("BridgeNet2"):WaitForChild("dataRemoteEvent"):FireServer(unpack(args))

                    wait(0.5)
                    attempts = attempts + 1
                else
                    print("No more pets matching pattern '" .. petPattern .. "' found in Backpack.")
                    break
                end
            end
        end
    end
end

-- Bu fonksiyonu çağırarak dışarıdan parametre gönderebilirsin
local function startGifting(pets, playersToGift)
    sendMultiplePetsToMultiplePlayers(pets, playersToGift)
end

-- Örnek kullanımı (bunu dışarıdan değiştirilebilir şekilde bırak)
-- startGifting({"Fluri Flura", "Another Pet"}, {"kenzyfarms12", "player2"})
