local a = game:GetService("Players")
local b = game:GetService("ReplicatedStorage")

local c = a.LocalPlayer
local d = c:WaitForChild("Backpack")

local function e(f, g)
    local h = c.Character or c.CharacterAdded:Wait()

    for _, i in ipairs(f) do
        for _, j in ipairs(g) do
            while true do
                local k = nil
                for _, l in ipairs(d:GetChildren()) do
                    if l:IsA("Tool") and string.match(l.Name, i .. "$") then
                        k = l
                        break
                    end
                end

                if k and k.Parent == d then
                    for _, m in ipairs(h:GetChildren()) do
                        if m:IsA("Tool") and string.match(m.Name, i .. "$") then
                            m.Parent = d
                        end
                    end

                    k.Parent = h

                    local n = {
                        {
                            {
                                Item = k,
                                ToGift = j
                            },
                            "\021"
                        }
                    }

                    b:WaitForChild("BridgeNet2"):WaitForChild("dataRemoteEvent"):FireServer(unpack(n))

                    wait(0.5)
                else
                    print("No more pets matching pattern '" .. i .. "' found in Backpack.")
                    break
                end
            end
        end
    end
end

return {
    SendPets = e
}
